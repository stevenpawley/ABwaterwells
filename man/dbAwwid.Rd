% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dbAWWID.R
\name{dbAwwid}
\alias{dbAwwid}
\title{Create a connection to the AEPA AWWID web server}
\description{
An R6 object that contains methods to request tables from the AWWID web server
using the OData protocol
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{url}}{The base URL}

\item{\code{tables}}{A character vector of tables that are contained in AWWID.}

\item{\code{cache}}{Logical to indicate whether the results from the
queries/requests will be cached.}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-dbAwwid-new}{\code{dbAwwid$new()}}
\item \href{#method-dbAwwid-request}{\code{dbAwwid$request()}}
\item \href{#method-dbAwwid-query_lithologs}{\code{dbAwwid$query_lithologs()}}
\item \href{#method-dbAwwid-query_screens}{\code{dbAwwid$query_screens()}}
\item \href{#method-dbAwwid-query_water_level}{\code{dbAwwid$query_water_level()}}
\item \href{#method-dbAwwid-clear_cache}{\code{dbAwwid$clear_cache()}}
\item \href{#method-dbAwwid-clone}{\code{dbAwwid$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-dbAwwid-new"></a>}}
\if{latex}{\out{\hypertarget{method-dbAwwid-new}{}}}
\subsection{Method \code{new()}}{
Initialize a connection to the AEPA web server
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dbAwwid$new(cache = TRUE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{cache}}{whether to internally cache the results of the requests.
This can increase performance for example, for queries where the wells
or well reports tables need to be repeatedly downloaded. The default is
TRUE.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
a R6 class.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-dbAwwid-request"></a>}}
\if{latex}{\out{\hypertarget{method-dbAwwid-request}{}}}
\subsection{Method \code{request()}}{
Request a table from the web server with options to filter the data
on the server using OData conventions
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dbAwwid$request(name, filter = NULL, select = NULL, top = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{name, }}{name of the table to download.}

\item{\code{filter}}{odata compatible query to filter the data before
downloading.}

\item{\code{select}}{a character vector of columns to select.}

\item{\code{top}}{integer, optionally return only the first specified number of
rows.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
a R6 class.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-dbAwwid-query_lithologs"></a>}}
\if{latex}{\out{\hypertarget{method-dbAwwid-query_lithologs}{}}}
\subsection{Method \code{query_lithologs()}}{
Predefined query to extract a table of lithologs data
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dbAwwid$query_lithologs(ext = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{ext}}{optional numeric vector specifying the rectangular bounding box
of wells to return. Must be specified as c(xmin, ymin, xmax, ymax).}
}
\if{html}{\out{</div>}}
}
\subsection{Details}{
The 'query_lithologs' function combines well identifer and location
information from the 'wells' and 'wellreports' tables, with interval
descriptions from the 'lithologies' table.
}

\subsection{Returns}{
a data.table.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-dbAwwid-query_screens"></a>}}
\if{latex}{\out{\hypertarget{method-dbAwwid-query_screens}{}}}
\subsection{Method \code{query_screens()}}{
Predefined query to extract a table of combined screen and perforation
depths
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dbAwwid$query_screens(ext = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{ext}}{optionally provide a character vector to specify the
geographic extent of the downloaded data, in the order of
c(xmin, ymin, xmax, ymax).}
}
\if{html}{\out{</div>}}
}
\subsection{Details}{
The query downloads the screens and perforations tables. For wells that
contain multiple screen/perforation depth intervals, the
screen/perforation depths are aggregated by taking the top depth as the
minimum depth of the combined screens, and the bottom depth as the
maximum depth of the combined screens.
}

\subsection{Returns}{
return a data.table of depth to well screens.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-dbAwwid-query_water_level"></a>}}
\if{latex}{\out{\hypertarget{method-dbAwwid-query_water_level}{}}}
\subsection{Method \code{query_water_level()}}{
Predefined query to extract a table of static water depths from AWWID
based on the pump tests table
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dbAwwid$query_water_level(
  ext = NULL,
  keep = c("newest", "average", "maximum", "minimum")
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{ext}}{optional numeric vector specifying the rectangular bounding box
of wells to return. Must be specified as c(xmin, ymin, xmax, ymax).}

\item{\code{keep}}{character, method to use to aggregate wells that contain
multiple pump test measurements. One of c("newest", "average",
"maximum", "minimum").}
}
\if{html}{\out{</div>}}
}
\subsection{Details}{
The query downloads the wells, well reports and pump tests tables. These
are joined based on getting the linking the well reports to the wells
table using the 'wellid' column. We do this because the well reports
table also contains the 'gicwellid'. Then we join the pump tests table to
the previous dataset based on the 'wellreportid'.

To get the static water depth, we use the 'staticwaterlevel' column. For
wells that have multiple pump tests, the method specified in 'keep' is
used. The default is to retain only the newest test.
}

\subsection{Returns}{
returns a data.table of static water levels.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-dbAwwid-clear_cache"></a>}}
\if{latex}{\out{\hypertarget{method-dbAwwid-clear_cache}{}}}
\subsection{Method \code{clear_cache()}}{
Clear the internal cache of previous requests
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dbAwwid$clear_cache()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
NULL
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-dbAwwid-clone"></a>}}
\if{latex}{\out{\hypertarget{method-dbAwwid-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{dbAwwid$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
